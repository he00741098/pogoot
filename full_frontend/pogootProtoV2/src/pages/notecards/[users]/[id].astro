---
export const prerender = false;
const { env } = Astro.locals.runtime;
const { users, id } = Astro.params;
const fzstd = require("fzstd");
let data = await env.NOTECARDBUCKET.get(users + id);

if (data == null) {
  data = "Nothing";
} else {
  let utf8decoder = new TextDecoder();
  if (utf8decoder == null) {
    data = "Decoder is null";
  }
  const compressed = new Uint8Array(data.arrayBuffer());
  if (compressed == null) {
    data = "compressed is null";
  }
  const decompressed = fzstd.decompress(compressed);

  const decoded = utf8decoder.decode(decompressed);
  data = decoded;
}
---

<h1>{users}: {id}</h1>
<h3>{data}</h3>
